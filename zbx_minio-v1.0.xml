<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export>
    <version>5.0</version>
    <date>2022-04-29T07:18:16Z</date>
    <groups>
        <group>
            <name>minio</name>
        </group>
    </groups>
    <templates>
        <template>
            <template>Template Minio</template>
            <name>Template Minio</name>
            <groups>
                <group>
                    <name>minio</name>
                </group>
            </groups>
            <applications>
                <application>
                    <name>minio</name>
                </application>
            </applications>
            <items>
                <item>
                    <name>Minio open file discriptor</name>
                    <type>DEPENDENT</type>
                    <key>file_discriptor</key>
                    <delay>0</delay>
                    <value_type>FLOAT</value_type>
                    <units>number</units>
                    <applications>
                        <application>
                            <name>minio</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>PROMETHEUS_PATTERN</type>
                            <params>minio_node_file_descriptor_open_total
</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>minio_master_item</key>
                    </master_item>
                </item>
                <item>
                    <name>Minio inter traffic</name>
                    <type>DEPENDENT</type>
                    <key>inter_traffic</key>
                    <delay>0</delay>
                    <value_type>FLOAT</value_type>
                    <units>bytes</units>
                    <applications>
                        <application>
                            <name>minio</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>PROMETHEUS_PATTERN</type>
                            <params>minio_inter_node_traffic_sent_bytes{server=&quot;127.0.0.1:9000&quot;}
</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>minio_master_item</key>
                    </master_item>
                </item>
                <item>
                    <name>minio master item</name>
                    <type>HTTP_AGENT</type>
                    <key>minio_master_item</key>
                    <delay>5s</delay>
                    <history>1d</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <applications>
                        <application>
                            <name>minio</name>
                        </application>
                    </applications>
                    <url>http://185.18.214.187:9000/minio/v2/metrics/cluster</url>
                    <headers>
                        <header>
                            <name>Authorization</name>
                            <value>Bearer eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJleHAiOjQ4MDQ0MDczODIsImlzcyI6InByb21ldGhldXMiLCJzdWIiOiJtaW5pbyJ9.s-6oGLqWHdOXGuGjBLRr3j6HDnWY96dDZSPiGd9syV5ePKg3riWf0g88e3_78dgXdeucGIuDjSqKm7TLKh6uzQ</value>
                        </header>
                        <header>
                            <name>Accept</name>
                            <value>application/json</value>
                        </header>
                    </headers>
                </item>
                <item>
                    <name>Minio uptime</name>
                    <type>DEPENDENT</type>
                    <key>minoi_uptime_seconds</key>
                    <delay>0</delay>
                    <value_type>FLOAT</value_type>
                    <units>sec</units>
                    <applications>
                        <application>
                            <name>minio</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>PROMETHEUS_PATTERN</type>
                            <params>minio_node_process_uptime_seconds{server=&quot;127.0.0.1:9000&quot;}
</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>minio_master_item</key>
                    </master_item>
                </item>
                <item>
                    <name>test_bucket_size</name>
                    <type>DEPENDENT</type>
                    <key>test_bucket_size</key>
                    <delay>0</delay>
                    <value_type>FLOAT</value_type>
                    <units>bytes</units>
                    <applications>
                        <application>
                            <name>minio</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>PROMETHEUS_PATTERN</type>
                            <params>minio_bucket_usage_total_bytes{bucket=&quot;test&quot;,server=&quot;127.0.0.1:9000&quot;}
</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>minio_master_item</key>
                    </master_item>
                </item>
            </items>
            <discovery_rules>
                <discovery_rule>
                    <name>Minio_Bucket_Usage</name>
                    <type>DEPENDENT</type>
                    <key>bucket_usage</key>
                    <delay>0</delay>
                    <item_prototypes>
                        <item_prototype>
                            <name>{#BUCKET_NAME} of {#ON_SERVER}</name>
                            <type>DEPENDENT</type>
                            <key>Bucket-[{#BUCKET_NAME}]</key>
                            <delay>0</delay>
                            <value_type>FLOAT</value_type>
                            <units>bytes</units>
                            <applications>
                                <application>
                                    <name>minio</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>PROMETHEUS_PATTERN</type>
                                    <params>{#METRIC}{bucket=&quot;{#BUCKET_NAME}&quot;,server=&quot;{#ON_SERVER}&quot;}
</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>minio_master_item</key>
                            </master_item>
                        </item_prototype>
                    </item_prototypes>
                    <graph_prototypes>
                        <graph_prototype>
                            <name>Minio {#METRIC} {#BUCKET_NAME} {#ON_SERVER}</name>
                            <graph_items>
                                <graph_item>
                                    <sortorder>1</sortorder>
                                    <drawtype>BOLD_LINE</drawtype>
                                    <color>FF0080</color>
                                    <calc_fnc>ALL</calc_fnc>
                                    <item>
                                        <host>Template Minio</host>
                                        <key>Bucket-[{#BUCKET_NAME}]</key>
                                    </item>
                                </graph_item>
                            </graph_items>
                        </graph_prototype>
                        <graph_prototype>
                            <name>{#METRIC} {#BUCKET_NAME} {#ON_SERVER}</name>
                            <graph_items>
                                <graph_item>
                                    <sortorder>1</sortorder>
                                    <drawtype>BOLD_LINE</drawtype>
                                    <color>BF00FF</color>
                                    <calc_fnc>ALL</calc_fnc>
                                    <item>
                                        <host>Template Minio</host>
                                        <key>Bucket-[{#BUCKET_NAME}]</key>
                                    </item>
                                </graph_item>
                            </graph_items>
                        </graph_prototype>
                    </graph_prototypes>
                    <master_item>
                        <key>minio_master_item</key>
                    </master_item>
                    <lld_macro_paths>
                        <lld_macro_path>
                            <lld_macro>{#BUCKET_NAME}</lld_macro>
                            <path>$.labels['bucket']</path>
                        </lld_macro_path>
                        <lld_macro_path>
                            <lld_macro>{#METRIC}</lld_macro>
                            <path>$.['name']</path>
                        </lld_macro_path>
                        <lld_macro_path>
                            <lld_macro>{#ON_SERVER}</lld_macro>
                            <path>$.labels['server']</path>
                        </lld_macro_path>
                    </lld_macro_paths>
                    <preprocessing>
                        <step>
                            <type>PROMETHEUS_TO_JSON</type>
                            <params>minio_bucket_usage_total_bytes{bucket=~&quot;.*&quot;,server=~&quot;.*&quot;}</params>
                        </step>
                    </preprocessing>
                </discovery_rule>
                <discovery_rule>
                    <name>Minio_inter_traffic_lld</name>
                    <type>DEPENDENT</type>
                    <key>minio_inter_traffic_lld</key>
                    <delay>0</delay>
                    <lifetime>1d</lifetime>
                    <item_prototypes>
                        <item_prototype>
                            <name>{#METRIC} on {#SERVER}</name>
                            <type>DEPENDENT</type>
                            <key>Total[{#METRIC}]</key>
                            <delay>0</delay>
                            <value_type>FLOAT</value_type>
                            <units>count</units>
                            <applications>
                                <application>
                                    <name>minio</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>PROMETHEUS_PATTERN</type>
                                    <params>minio_inter_node_traffic_sent_bytes{server=~&quot;.*&quot;}
</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>minio_master_item</key>
                            </master_item>
                        </item_prototype>
                    </item_prototypes>
                    <master_item>
                        <key>minio_master_item</key>
                    </master_item>
                    <lld_macro_paths>
                        <lld_macro_path>
                            <lld_macro>{#METRIC}</lld_macro>
                            <path>$['name']</path>
                        </lld_macro_path>
                        <lld_macro_path>
                            <lld_macro>{#SERVER}</lld_macro>
                            <path>$.labels['server']</path>
                        </lld_macro_path>
                    </lld_macro_paths>
                    <preprocessing>
                        <step>
                            <type>PROMETHEUS_TO_JSON</type>
                            <params>minio_inter_node_traffic_sent_bytes{server=~&quot;.*&quot;}</params>
                        </step>
                    </preprocessing>
                </discovery_rule>
                <discovery_rule>
                    <name>minio total used byte per directory</name>
                    <type>DEPENDENT</type>
                    <key>minio_network_transfer_lld</key>
                    <delay>0</delay>
                    <item_prototypes>
                        <item_prototype>
                            <name>{#METRIC} {#DISK} {#ON_SERVER}</name>
                            <type>DEPENDENT</type>
                            <key>Total-[{#DISK}]</key>
                            <delay>0</delay>
                            <value_type>FLOAT</value_type>
                            <units>Bytes</units>
                            <applications>
                                <application>
                                    <name>minio</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>PROMETHEUS_PATTERN</type>
                                    <params>{#METRIC}{disk=&quot;{#DISK}&quot;,server=&quot;{#ON_SERVER}&quot;}
</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>minio_master_item</key>
                            </master_item>
                        </item_prototype>
                    </item_prototypes>
                    <graph_prototypes>
                        <graph_prototype>
                            <name>{#METRIC} {#DISK} {#ON_SERVER}</name>
                            <graph_items>
                                <graph_item>
                                    <sortorder>1</sortorder>
                                    <drawtype>BOLD_LINE</drawtype>
                                    <color>0080FF</color>
                                    <calc_fnc>ALL</calc_fnc>
                                    <item>
                                        <host>Template Minio</host>
                                        <key>Total-[{#DISK}]</key>
                                    </item>
                                </graph_item>
                            </graph_items>
                        </graph_prototype>
                    </graph_prototypes>
                    <master_item>
                        <key>minio_master_item</key>
                    </master_item>
                    <lld_macro_paths>
                        <lld_macro_path>
                            <lld_macro>{#DISK}</lld_macro>
                            <path>$.labels['disk']</path>
                        </lld_macro_path>
                        <lld_macro_path>
                            <lld_macro>{#METRIC}</lld_macro>
                            <path>$.['name']</path>
                        </lld_macro_path>
                        <lld_macro_path>
                            <lld_macro>{#ON_SERVER}</lld_macro>
                            <path>$.labels['server']</path>
                        </lld_macro_path>
                    </lld_macro_paths>
                    <preprocessing>
                        <step>
                            <type>PROMETHEUS_TO_JSON</type>
                            <params>minio_node_disk_used_bytes{disk=~&quot;.*&quot;,server=~&quot;.*&quot;}</params>
                        </step>
                    </preprocessing>
                </discovery_rule>
                <discovery_rule>
                    <name>Minio object per bucket count lld</name>
                    <type>DEPENDENT</type>
                    <key>Minio_object_per_bucket_count_lld</key>
                    <delay>0</delay>
                    <item_prototypes>
                        <item_prototype>
                            <name>{#METRIC} {#BUCKET_NAME}  {#ON_SERVER}</name>
                            <type>DEPENDENT</type>
                            <key>object-count-[{#BUCKET_NAME}]</key>
                            <delay>0</delay>
                            <units>number</units>
                            <applications>
                                <application>
                                    <name>minio</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>PROMETHEUS_PATTERN</type>
                                    <params>{#METRIC}{bucket=&quot;{#BUCKET_NAME}&quot;,server=&quot;{#ON_SERVER}&quot;}
</params>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>minio_master_item</key>
                            </master_item>
                        </item_prototype>
                    </item_prototypes>
                    <graph_prototypes>
                        <graph_prototype>
                            <name>object count per {#BUCKET_NAME} on server  {#ON_SERVER}</name>
                            <graph_items>
                                <graph_item>
                                    <sortorder>1</sortorder>
                                    <drawtype>FILLED_REGION</drawtype>
                                    <color>1A7C11</color>
                                    <calc_fnc>ALL</calc_fnc>
                                    <item>
                                        <host>Template Minio</host>
                                        <key>object-count-[{#BUCKET_NAME}]</key>
                                    </item>
                                </graph_item>
                            </graph_items>
                        </graph_prototype>
                    </graph_prototypes>
                    <master_item>
                        <key>minio_master_item</key>
                    </master_item>
                    <lld_macro_paths>
                        <lld_macro_path>
                            <lld_macro>{#BUCKET_NAME}</lld_macro>
                            <path>$.labels['bucket']</path>
                        </lld_macro_path>
                        <lld_macro_path>
                            <lld_macro>{#METRIC}</lld_macro>
                            <path>$.['name']</path>
                        </lld_macro_path>
                        <lld_macro_path>
                            <lld_macro>{#ON_SERVER}</lld_macro>
                            <path>$.labels['server']</path>
                        </lld_macro_path>
                    </lld_macro_paths>
                    <preprocessing>
                        <step>
                            <type>PROMETHEUS_TO_JSON</type>
                            <params>minio_bucket_usage_object_total{bucket=~&quot;.*&quot;,server=~&quot;.*&quot;}</params>
                        </step>
                    </preprocessing>
                </discovery_rule>
            </discovery_rules>
            <macros>
                <macro>
                    <macro>{$HOST}</macro>
                    <value>127.0.0.1</value>
                    <description>minio ip</description>
                </macro>
                <macro>
                    <macro>{$PORT}</macro>
                    <value>9000</value>
                    <description>minio port api default</description>
                </macro>
            </macros>
            <screens>
                <screen>
                    <name>Minio status</name>
                    <hsize>2</hsize>
                    <vsize>10</vsize>
                </screen>
            </screens>
        </template>
    </templates>
</zabbix_export>
